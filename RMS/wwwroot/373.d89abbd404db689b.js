"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[373],{5373:(tt,C,i)=>{i.r(C),i.d(C,{StaffModule:()=>W});var u=i(6895),b=i(3031),t=i(1571),y=i(384);let M=(()=>{class n{constructor(e){this.authSvc=e,this.title="STAFF PORTAL"}ngOnInit(){}onLogout(){this.authSvc.logout()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(y.e))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:15,vars:4,consts:[[1,"sub-header"],[1,"center"],[1,"nav-buttons",3,"routerLink"],[1,"logout"],[3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2),t.qZA()(),t.TgZ(3,"div",1)(4,"button",2),t._uU(5,"MENU"),t.qZA()(),t.TgZ(6,"div",1)(7,"button",2),t._uU(8,"ORDERS"),t.qZA()(),t.TgZ(9,"div",1)(10,"button",2),t._uU(11,"TABLES"),t.qZA()(),t.TgZ(12,"div",3)(13,"button",4),t.NdJ("click",function(){return o.onLogout()}),t._uU(14,"LOG OUT"),t.qZA()()),2&e&&(t.xp6(2),t.hij(" ",o.title,""),t.xp6(2),t.Q6J("routerLink","/staff/menu"),t.xp6(3),t.Q6J("routerLink","/staff/orders"),t.xp6(3),t.Q6J("routerLink","/staff/tables"))},dependencies:[b.rH],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px}.nav-buttons[_ngcontent-%COMP%]{height:90px;width:300px;border:1px solid #D4A373;border-radius:5px;background-color:#faedcd;color:#d4a373;letter-spacing:1px}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}.logout[_ngcontent-%COMP%]{position:fixed;left:50%;bottom:10%;transform:translate(-50%,-50%)}.logout[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;width:150px;border-radius:4px;background:#fff;border:1px solid #D4A373;color:#d4a373}.logout[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#FAEDCD;color:#d4a373}"]}),n})();var g=i(5861),U=i(3905),A=i(9300),x=i(4004),f=i(2792),s=i(433),Z=i(782),F=i(455);function P(n,r){if(1&n&&(t.TgZ(0,"mat-grid-list",10)(1,"mat-grid-tile",11)(2,"span",3),t._uU(3),t.qZA()(),t.TgZ(4,"mat-grid-tile",12)(5,"div"),t._UZ(6,"mat-slide-toggle",13),t.qZA()()()),2&n){const e=r.$implicit;t.Q6J("formGroup",e),t.xp6(3),t.Oqu(null==e.value?null:e.value.name)}}function J(n,r){if(1&n&&(t.ynx(0,7),t.TgZ(1,"h3",8),t._uU(2),t.qZA(),t.YNc(3,P,7,2,"mat-grid-list",9),t.BQk()),2&n){const e=r.$implicit;t.Q6J("formGroup",e),t.xp6(2),t.Oqu(null==e.value?null:e.value.category),t.xp6(1),t.Q6J("ngForOf",e.controls.items.controls)}}function S(n,r){if(1&n&&(t.ynx(0),t.YNc(1,J,4,3,"ng-container",6),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.formArray.controls)}}let G=(()=>{class n{constructor(e,o){this.formBuilder=e,this.menuApi=o}ngOnInit(){var e=this;return(0,g.Z)(function*(){const o=yield(0,U.z)(e.menuApi.getAllByCategories());e.formArray=e.formBuilder.array(o.data.map(a=>e.createCategoryFormGroup(a))),e.formArray.controls.forEach(a=>a.controls.items.controls.forEach(l=>l.valueChanges.pipe((0,A.h)(c=>!!c.id),(0,x.U)(c=>({id:c.id,name:c.name,status:c.status?f.e.active:f.e.inactive}))).subscribe(c=>e.updateMenuItem(c))))})()}createCategoryFormGroup(e){return this.formBuilder.nonNullable.group({category:e.category,items:this.formBuilder.array(e.items.map(a=>this.createItemFormGroup(a)))})}createItemFormGroup(e){return this.formBuilder.nonNullable.group({id:e.id,name:e.name,status:e.status===f.e.active})}updateMenuItem(e){this.menuApi.updateMenuItemStatus(e).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(f.X))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-menu"]],decls:11,vars:1,consts:[[1,"sub-header"],["cols","3","rowHeight","30px"],["colspan","2","rowspan","1"],[1,"full-width"],["colspan","1","rowspan","1",1,"full-width"],[4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"sub-header-list"],["class","card-bg grid-list","cols","3","rowHeight","40px",3,"formGroup",4,"ngFor","ngForOf"],["cols","3","rowHeight","40px",1,"card-bg","grid-list",3,"formGroup"],["colspan","2","rowspan","1",1,"grid-tile"],["colspan","1","rowspan","1"],["formControlName","status"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2," MENU "),t.qZA()(),t.TgZ(3,"mat-grid-list",1)(4,"mat-grid-tile",2)(5,"span",3),t._uU(6,"ITEM"),t.qZA()(),t.TgZ(7,"mat-grid-tile",4)(8,"span"),t._uU(9,"AVAILABLE"),t.qZA()()(),t.YNc(10,S,2,1,"ng-container",5)),2&e&&(t.xp6(10),t.Q6J("ngIf",o.formArray))},dependencies:[u.sg,u.O5,Z.Il,Z.DX,F.Rr,s.JJ,s.JL,s.sg,s.u],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.grid-tile[_ngcontent-%COMP%]{margin:0 10px}.grid-list[_ngcontent-%COMP%]{margin-bottom:5px}.full-width[_ngcontent-%COMP%]{width:100%}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}.sub-header-list[_ngcontent-%COMP%]{color:#d4a373;margin:10px 5px 5px}"]}),n})();var d=i(7963),N=i(4859),p=i(3546),O=i(3848);function I(n,r){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.menu.name," ")}}function q(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1," Special instructions: "),t.TgZ(2,"h5"),t._uU(3),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.instructions)}}function $(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",5)(1,"mat-card-title"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-content")(7,"ul",6),t.YNc(8,I,2,1,"li",7),t.qZA(),t._UZ(9,"br"),t.YNc(10,q,4,1,"span",8),t.qZA(),t.TgZ(11,"mat-card-actions",9)(12,"button",10),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onComplete(l.id,c.OrderEnum.Inactive))}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",11),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.onComplete(l.id,c.OrderEnum.Completed))}),t._uU(15,"Complete"),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(2),t.Oqu(t.xi3(3,5,e.orderDatetime,"dd MMM, h:mm a")),t.xp6(3),t.AsE("",e.table.name," | Order #",e.id,""),t.xp6(3),t.Q6J("ngForOf",e.items),t.xp6(2),t.Q6J("ngIf",e.instructions)}}function B(n,r){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e.menu.name," ")}}function Q(n,r){if(1&n&&(t.TgZ(0,"span"),t._uU(1," Special instructions: "),t.TgZ(2,"h5"),t._uU(3),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Oqu(e.instructions)}}function Y(n,r){if(1&n&&(t.TgZ(0,"mat-card",5)(1,"mat-card-title"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-content")(7,"ul",6),t.YNc(8,B,2,1,"li",7),t.qZA(),t._UZ(9,"br"),t.YNc(10,Q,4,1,"span",8),t.qZA()()),2&n){const e=r.$implicit;t.xp6(2),t.Oqu(t.xi3(3,5,e.orderDatetime,"dd MMM, h:mm a")),t.xp6(3),t.AsE("",e.table.name," | Order #",e.id,""),t.xp6(3),t.Q6J("ngForOf",e.items),t.xp6(2),t.Q6J("ngIf",e.instructions)}}let L=(()=>{class n{constructor(e,o){this.formBuilder=e,this.ordersApi=o,this.orders$=this.ordersApi.getByStatus(d.l.Pending),this.completedOrders$=this.ordersApi.getByStatus(d.l.Completed),this.OrderEnum=d.l}ngOnInit(){}onComplete(e,o){this.ordersApi.updateStatus(e,o).subscribe(()=>{this.orders$=this.ordersApi.getByStatus(d.l.Pending),this.completedOrders$=this.ordersApi.getByStatus(d.l.Completed)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(d.W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-orders"]],decls:9,vars:6,consts:[[1,"sub-header"],["mat-align-tabs","center"],["label","PENDING"],["class","card-bg",4,"ngFor","ngForOf"],["label","COMPLETED"],[1,"card-bg"],[1,"no-style-list","wrapped-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"right-align"],["mat-button","",1,"card-button",2,"color","#bc6c25",3,"click"],["mat-button","",1,"card-button",3,"click"]],template:function(e,o){if(1&e&&(t.TgZ(0,"h3",0),t._uU(1," ORDERS\n"),t.qZA(),t.TgZ(2,"mat-tab-group",1)(3,"mat-tab",2),t.YNc(4,$,16,8,"mat-card",3),t.ALo(5,"async"),t.qZA(),t.TgZ(6,"mat-tab",4),t.YNc(7,Y,11,8,"mat-card",3),t.ALo(8,"async"),t.qZA()()),2&e){let a,l;t.xp6(4),t.Q6J("ngForOf",null==(a=t.lcZ(5,2,o.orders$))?null:a.data),t.xp6(3),t.Q6J("ngForOf",null==(l=t.lcZ(8,4,o.completedOrders$))?null:l.data)}},dependencies:[u.sg,u.O5,N.lW,p.a8,p.dn,p.n5,p.$j,p.hq,O.SP,O.uX,u.Ov,u.uU],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9;margin:10px 5px}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}ul[_ngcontent-%COMP%]{list-style:none;padding-left:5px}button[_ngcontent-%COMP%]{height:50px;width:150px;border-radius:4px;background:#fff;border:1px solid #D4A373;color:#d4a373}.right-align[_ngcontent-%COMP%]{display:flex;justify-content:right}"]}),n})();var _=i(9808),w=i(529);let v=(()=>{class n{constructor(e){this.httpClient=e,this.method="table"}getAll(){return this.httpClient.get(this.method)}getById(e){return this.httpClient.get(`${this.method}/${e}`)}save(e){return this.httpClient.post(`${this.method}`,e)}updateOrderStatus(e){return this.httpClient.put(`${this.method}/${e.id}/${e.status}`,e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=(()=>{return(n=m||(m={}))[n.undefined=0]="undefined",n[n.active=1]="active",n[n.inactive=2]="inactive",n[n.available=3]="available",n[n.occupied=4]="occupied",m;var n})(),T=i(3091),h=i(9549),D=i(4144);let E=(()=>{class n{constructor(e,o,a){this.fb=e,this._bottomSheetRef=o,this.rmsTableAPISvc=a}ngOnInit(){this.formGroup=this.fb.nonNullable.group({name:["",s.kI.required],capacity:[0,[s.kI.required,s.kI.min(1),s.kI.max(99)]],status:[m.inactive]})}createTable(){var e=this;return(0,g.Z)(function*(){const o=e.formGroup.getRawValue();console.log(o);const a=yield(0,_.n)(e.rmsTableAPISvc.save(o));console.log(a),e._bottomSheetRef.dismiss(!0)})()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(T.oL),t.Y36(v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-table"]],decls:12,vars:2,consts:[[3,"formGroup"],["appearance","fill",1,"full-width"],["matInput","","placeholder","Ex. Table 'n'","formControlName","name"],["matInput","","placeholder","Ex. 4","formControlName","capacity"],[1,"btn-wrapper"],[3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Name"),t.qZA(),t._UZ(4,"input",2),t.qZA(),t.TgZ(5,"mat-form-field",1)(6,"mat-label"),t._uU(7,"Capacity"),t.qZA(),t._UZ(8,"input",3),t.qZA(),t.TgZ(9,"div",4)(10,"button",5),t.NdJ("click",function(){return o.createTable()}),t._uU(11,"Create"),t.qZA()()()),2&e&&(t.Q6J("formGroup",o.formGroup),t.xp6(10),t.Q6J("disabled",!o.formGroup.valid))},dependencies:[h.KE,h.hX,D.Nt,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".btn-wrapper[_ngcontent-%COMP%]{display:grid;place-items:center}.btn-wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:8px}"]}),n})();var k=i(4385),R=i(3238);function j(n,r){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("value",e),t.xp6(1),t.hij(" ",o.TableStatus[e]," ")}}function H(n,r){if(1&n&&(t.TgZ(0,"mat-card",4)(1,"div",5)(2,"div")(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.TgZ(7,"mat-form-field",6)(8,"mat-label"),t._uU(9,"Status"),t.qZA(),t.TgZ(10,"mat-select",7),t.YNc(11,j,2,2,"mat-option",8),t.qZA()()(),t.TgZ(12,"div"),t._UZ(13,"img",9),t.qZA()()()),2&n){const e=r.$implicit,o=t.oxw(2);t.Q6J("formGroup",e),t.xp6(4),t.Oqu(e.value.name),t.xp6(2),t.hij("Capacity: ",e.value.capacity,""),t.xp6(5),t.Q6J("ngForOf",o.TableStatusKeys),t.xp6(2),t.Q6J("src","https://chart.googleapis.com/chart?chs=128x128&cht=qr&chl=url:https://rms-appservice.azurewebsites.net/customer/menu?tableid="+e.value.id,t.LSH)}}function X(n,r){if(1&n&&(t.ynx(0),t.YNc(1,H,14,5,"mat-card",3),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==e.formArray?null:e.formArray.controls)}}const z=[{path:"",component:M},{path:"tables",component:(()=>{class n{constructor(e,o,a){this.formBuilder=e,this.tablesApi=o,this._bottomSheet=a,this.TableStatus=m,this.TableStatusKeys=Object.values(m).filter(l=>"number"==typeof l&&l>0)}ngOnInit(){var e=this;return(0,g.Z)(function*(){yield e.fetchData(),e.formArray.controls.map(o=>o.valueChanges.pipe((0,A.h)(a=>!!a.status),(0,x.U)(a=>a)).subscribe(a=>e.updateOrderStatus(a)))})()}fetchData(){var e=this;return(0,g.Z)(function*(){const o=yield(0,_.n)(e.tablesApi.getAll());e.formArray=e.formBuilder.nonNullable.array(o.data.map(a=>e.createFormGroup(a)))})()}createFormGroup(e){return this.formBuilder.nonNullable.group({id:e.id,name:e.name,capacity:e.capacity,status:e.status})}openAddPopUp(){var e=this;return(0,g.Z)(function*(){const o=e._bottomSheet.open(E);(yield(0,_.n)(o.afterDismissed()))&&(yield e.fetchData())})()}updateOrderStatus(e){this.tablesApi.updateOrderStatus(e).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(v),t.Y36(T.ch))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tables"]],decls:7,vars:1,consts:[[1,"sub-header"],[4,"ngIf"],["color","#d4a373",1,"btn-rounded","float-bottom-right",3,"click"],["class","card-bg grid-list",3,"formGroup",4,"ngFor","ngForOf"],[1,"card-bg","grid-list",3,"formGroup"],[1,"wrapper"],["appearance","fill"],["formControlName","status"],[3,"value",4,"ngFor","ngForOf"],[3,"src"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2," TABLES "),t.qZA()(),t.YNc(3,X,2,1,"ng-container",1),t.TgZ(4,"button",2),t.NdJ("click",function(){return o.openAddPopUp()}),t.TgZ(5,"span"),t._uU(6,"+"),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf",null==o.formArray?null:o.formArray.controls))},dependencies:[u.sg,u.O5,p.a8,p.n5,p.$j,h.KE,h.hX,k.gD,R.ey,s.JJ,s.JL,s.sg,s.u],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:2fr 1fr}.available[_ngcontent-%COMP%]{color:#fff;background-color:green}.grid-list[_ngcontent-%COMP%]{margin-bottom:10px}.card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}button.btn-rounded[_ngcontent-%COMP%]{height:3rem;width:3rem;border-radius:50%;outline:none;border:1px solid #ccd5ae;background-color:#d4a373;color:#fff}button.float-bottom-right[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem}button.float-bottom-right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:2rem}"]}),n})()},{path:"orders",component:L},{path:"menu",component:G}];let K=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[b.Bz.forChild(z),b.Bz]}),n})();var V=i(6585);let W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,K,V.M,s.UX]}),n})()}}]);