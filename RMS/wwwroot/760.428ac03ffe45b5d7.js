"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[760],{760:(D,f,a)=>{a.r(f),a.d(f,{StaffModule:()=>w});var u=a(6895),g=a(3031),t=a(1571),O=a(384);let y=(()=>{class o{constructor(n){this.authSvc=n,this.title="Staff Portal"}ngOnInit(){}onLogout(){this.authSvc.logout()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(O.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],decls:15,vars:4,consts:[[1,"sub-header"],[1,"center"],[1,"nav-buttons",3,"routerLink"],[1,"logout"],[3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2),t.qZA()(),t.TgZ(3,"div",1)(4,"button",2),t._uU(5,"MENU"),t.qZA()(),t.TgZ(6,"div",1)(7,"button",2),t._uU(8,"ORDERS"),t.qZA()(),t.TgZ(9,"div",1)(10,"button",2),t._uU(11,"TABLES"),t.qZA()(),t.TgZ(12,"div",3)(13,"button",4),t.NdJ("click",function(){return r.onLogout()}),t._uU(14,"LOG OUT"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",r.title,""),t.xp6(2),t.Q6J("routerLink","/staff/menu"),t.xp6(3),t.Q6J("routerLink","/staff/orders"),t.xp6(3),t.Q6J("routerLink","/staff/tables"))},dependencies:[g.rH],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px}.nav-buttons[_ngcontent-%COMP%]{height:90px;width:300px;border:1px solid #D4A373;border-radius:5px;background-color:#faedcd;color:#d4a373;letter-spacing:1px}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}.logout[_ngcontent-%COMP%]{position:fixed;left:50%;bottom:10%;transform:translate(-50%,-50%)}.logout[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;width:150px;border-radius:4px;background:#fff;border:1px solid #D4A373;color:#d4a373}.logout[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#FAEDCD;color:#d4a373}"]}),o})();var h=a(5861),Z=a(3905),C=a(9300),x=a(4004),d=a(2792),s=a(433),v=a(782),T=a(455);function M(o,e){if(1&o&&(t.TgZ(0,"mat-grid-list",10)(1,"mat-grid-tile",11)(2,"span",3),t._uU(3),t.qZA()(),t.TgZ(4,"mat-grid-tile",12)(5,"div"),t._UZ(6,"mat-slide-toggle",13),t.qZA()()()),2&o){const n=e.$implicit;t.Q6J("formGroup",n),t.xp6(3),t.Oqu(null==n.value?null:n.value.name)}}function _(o,e){if(1&o&&(t.ynx(0,7),t.TgZ(1,"h3",8),t._uU(2),t.qZA(),t.YNc(3,M,7,2,"mat-grid-list",9),t.BQk()),2&o){const n=e.$implicit;t.Q6J("formGroup",n),t.xp6(2),t.Oqu(null==n.value?null:n.value.category),t.xp6(1),t.Q6J("ngForOf",n.controls.items.controls)}}function F(o,e){if(1&o&&(t.ynx(0),t.YNc(1,_,4,3,"ng-container",6),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.formArray.controls)}}let U=(()=>{class o{constructor(n,r){this.formBuilder=n,this.menuApi=r}ngOnInit(){var n=this;return(0,h.Z)(function*(){const r=yield(0,Z.z)(n.menuApi.getAllByCategories());n.formArray=n.formBuilder.array(r.data.map(i=>n.createCategoryFormGroup(i))),n.formArray.controls.forEach(i=>i.controls.items.controls.forEach(c=>c.valueChanges.pipe((0,C.h)(l=>!!l.id),(0,x.U)(l=>({id:l.id,name:l.name,status:l.status?d.e.active:d.e.inactive}))).subscribe(l=>n.updateMenuItem(l))))})()}createCategoryFormGroup(n){return this.formBuilder.nonNullable.group({category:n.category,items:this.formBuilder.array(n.items.map(i=>this.createItemFormGroup(i)))})}createItemFormGroup(n){return this.formBuilder.nonNullable.group({id:n.id,name:n.name,status:n.status===d.e.active})}updateMenuItem(n){this.menuApi.updateMenuItemStatus(n).subscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(s.qu),t.Y36(d.X))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-menu"]],decls:11,vars:1,consts:[[1,"sub-header"],["cols","3","rowHeight","30px"],["colspan","2","rowspan","1"],[1,"full-width"],["colspan","1","rowspan","1",1,"full-width"],[4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"sub-header-list"],["class","card-bg grid-list","cols","3","rowHeight","40px",3,"formGroup",4,"ngFor","ngForOf"],["cols","3","rowHeight","40px",1,"card-bg","grid-list",3,"formGroup"],["colspan","2","rowspan","1",1,"grid-tile"],["colspan","1","rowspan","1"],["formControlName","status"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2," MENU "),t.qZA()(),t.TgZ(3,"mat-grid-list",1)(4,"mat-grid-tile",2)(5,"span",3),t._uU(6,"ITEM"),t.qZA()(),t.TgZ(7,"mat-grid-tile",4)(8,"span"),t._uU(9,"AVAILABLE"),t.qZA()()(),t.YNc(10,F,2,1,"ng-container",5)),2&n&&(t.xp6(10),t.Q6J("ngIf",r.formArray))},dependencies:[u.sg,u.O5,v.Il,v.DX,T.Rr,s.JJ,s.JL,s.sg,s.u],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.grid-tile[_ngcontent-%COMP%]{margin:0 10px}.grid-list[_ngcontent-%COMP%]{margin-bottom:5px}.full-width[_ngcontent-%COMP%]{width:100%}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}.sub-header-list[_ngcontent-%COMP%]{color:#d4a373;margin:10px 5px 5px}"]}),o})();var b=a(7963),G=a(4859),p=a(3546);function J(o,e){if(1&o&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&o){const n=e.$implicit;t.xp6(1),t.hij(" ",n.menu.name," ")}}function P(o,e){if(1&o){const n=t.EpF();t.TgZ(0,"mat-card",2)(1,"mat-card-title"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-content")(7,"ul",3),t.YNc(8,J,2,1,"li",4),t.qZA()(),t.TgZ(9,"mat-card-actions",5)(10,"button",6),t.NdJ("click",function(){const c=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onComplete(c.id))}),t._uU(11,"Completed"),t.qZA()()()}if(2&o){const n=e.$implicit;t.xp6(2),t.Oqu(t.xi3(3,4,n.orderDatetime,"h:mm a")),t.xp6(3),t.AsE("",n.table.name," - ",n.id,""),t.xp6(3),t.Q6J("ngForOf",n.items)}}let S=(()=>{class o{constructor(n,r){this.formBuilder=n,this.ordersApi=r,this.orders$=this.ordersApi.getAll()}ngOnInit(){}onComplete(n){this.ordersApi.updateStatus(n,b.l.Completed).subscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(s.qu),t.Y36(b.W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-orders"]],decls:4,vars:3,consts:[[1,"sub-header"],["class","card-bg",4,"ngFor","ngForOf"],[1,"card-bg"],[1,"no-style-list","wrapped-list"],[4,"ngFor","ngForOf"],[1,"right-align"],["mat-button","",1,"card-button",3,"click"]],template:function(n,r){if(1&n&&(t.TgZ(0,"h3",0),t._uU(1," ORDERS\n"),t.qZA(),t.YNc(2,P,12,7,"mat-card",1),t.ALo(3,"async")),2&n){let i;t.xp6(2),t.Q6J("ngForOf",null==(i=t.lcZ(3,1,r.orders$))?null:i.data)}},dependencies:[u.sg,G.lW,p.a8,p.dn,p.n5,p.$j,p.hq,u.Ov,u.uU],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9;margin-bottom:10px}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}button[_ngcontent-%COMP%]{height:50px;width:150px;border-radius:4px;background:#fff;border:1px solid #D4A373;color:#d4a373}.right-align[_ngcontent-%COMP%]{display:flex;justify-content:right}"]}),o})();var B=a(9808),N=a(529);let Q=(()=>{class o{constructor(n){this.httpClient=n,this.method="table"}getAll(){return this.httpClient.get(this.method)}getById(n){return this.httpClient.get(`${this.method}/${n}`)}updateOrderStatus(n){return this.httpClient.put(`${this.method}/${n.id}/${n.status}`,n)}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(N.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var m=(()=>{return(o=m||(m={}))[o.undefined=0]="undefined",o[o.active=1]="active",o[o.inactive=2]="inactive",o[o.available=3]="available",o[o.occupied=4]="occupied",m;var o})(),A=a(9549),I=a(4385),L=a(3238);function Y(o,e){if(1&o&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&o){const n=e.$implicit,r=t.oxw(3);t.Q6J("value",n),t.xp6(1),t.hij(" ",r.TableStatus[n]," ")}}function $(o,e){if(1&o&&(t.TgZ(0,"mat-card",3)(1,"div",4)(2,"div")(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Status"),t.qZA(),t.TgZ(10,"mat-select",6),t.YNc(11,Y,2,2,"mat-option",7),t.qZA()()(),t.TgZ(12,"div"),t._UZ(13,"img",8),t.qZA()()()),2&o){const n=e.$implicit,r=t.oxw(2);t.Q6J("formGroup",n),t.xp6(4),t.Oqu(n.value.name),t.xp6(2),t.hij("Capacity: ",n.value.capacity,""),t.xp6(5),t.Q6J("ngForOf",r.TableStatusKeys),t.xp6(2),t.Q6J("src","https://chart.googleapis.com/chart?chs=128x128&cht=qr&chl=url:https://rms-appservice.azurewebsites.net/customer/menu?tableid="+n.value.id,t.LSH)}}function j(o,e){if(1&o&&(t.ynx(0),t.YNc(1,$,14,5,"mat-card",2),t.BQk()),2&o){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==n.formArray?null:n.formArray.controls)}}const q=[{path:"",component:y},{path:"tables",component:(()=>{class o{constructor(n,r){this.formBuilder=n,this.tablesApi=r,this.TableStatus=m,this.TableStatusKeys=Object.values(m).filter(i=>"number"==typeof i&&i>0)}ngOnInit(){var n=this;return(0,h.Z)(function*(){const r=yield(0,B.n)(n.tablesApi.getAll());n.formArray=n.formBuilder.nonNullable.array(r.data.map(i=>n.createFormGroup(i))),n.formArray.controls.map(i=>i.valueChanges.pipe((0,C.h)(c=>!!c.status),(0,x.U)(c=>c)).subscribe(c=>n.updateOrderStatus(c)))})()}createFormGroup(n){return this.formBuilder.nonNullable.group({id:n.id,name:n.name,capacity:n.capacity,status:n.status})}updateOrderStatus(n){this.tablesApi.updateOrderStatus(n).subscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(s.qu),t.Y36(Q))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tables"]],decls:4,vars:1,consts:[[1,"sub-header"],[4,"ngIf"],["class","card-bg grid-list",3,"formGroup",4,"ngFor","ngForOf"],[1,"card-bg","grid-list",3,"formGroup"],[1,"wrapper"],["appearance","fill"],["formControlName","status"],[3,"value",4,"ngFor","ngForOf"],[3,"src"],[3,"value"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2," TABLES "),t.qZA()(),t.YNc(3,j,2,1,"ng-container",1)),2&n&&(t.xp6(3),t.Q6J("ngIf",null==r.formArray?null:r.formArray.controls))},dependencies:[u.sg,u.O5,p.a8,p.n5,p.$j,A.KE,A.hX,I.gD,L.ey,s.JJ,s.JL,s.sg,s.u],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:2fr 1fr}.available[_ngcontent-%COMP%]{color:#fff;background-color:green}.grid-list[_ngcontent-%COMP%]{margin-bottom:10px}.card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}"]}),o})()},{path:"orders",component:S},{path:"menu",component:U}];let H=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.Bz.forChild(q),g.Bz]}),o})();var R=a(9986);let w=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,H,R.M,s.UX]}),o})()}}]);