"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[791],{4791:(_,m,r)=>{r.r(m),r.d(m,{CustomerModule:()=>b});var l=r(6895),d=r(639),t=r(1571),y=r(5861),h=r(9808),x=r(8372),v=r(4004),Z=r(1884),M=r(2792),u=r(433),g=r(782),p=r(7084),T=r(4850);function A(n,a){if(1&n){const e=t.EpF();t.ynx(0,14),t.TgZ(1,"mat-grid-list",15)(2,"mat-grid-tile",4)(3,"div",5)(4,"h3",16),t._uU(5),t.qZA(),t.TgZ(6,"span",17),t._uU(7),t.ALo(8,"currency"),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"span",18),t._uU(11),t.qZA()()(),t.TgZ(12,"mat-grid-tile",19)(13,"div")(14,"button",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.patchQuantity(s,-1))}),t._uU(15," - "),t.qZA(),t.TgZ(16,"span",21),t._uU(17),t.qZA(),t.TgZ(18,"button",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.patchQuantity(s,1))}),t._uU(19," + "),t.qZA()()()(),t._UZ(20,"mat-divider"),t.BQk()}if(2&n){const e=a.$implicit;t.Q6J("formGroup",e),t.xp6(5),t.Oqu(e.value.name),t.xp6(2),t.Oqu(t.xi3(8,5,e.value.price,"INR")),t.xp6(4),t.Oqu(e.value.description),t.xp6(6),t.hij(" ",e.value.quantity," ")}}function O(n,a){if(1&n&&(t.TgZ(0,"mat-accordion",9),t.ynx(1),t.TgZ(2,"mat-expansion-panel",10)(3,"mat-expansion-panel-header")(4,"mat-panel-title",11),t._uU(5),t.ALo(6,"uppercase"),t.qZA()(),t.YNc(7,A,21,8,"ng-container",12),t.qZA(),t.BQk(),t._UZ(8,"div",13),t.qZA()),2&n){const e=a.$implicit;t.Q6J("formGroup",e),t.xp6(5),t.hij(" ",t.lcZ(6,3,e.value.category)," "),t.xp6(2),t.Q6J("ngForOf",e.controls.items.controls)}}function q(n,a){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,O,9,5,"mat-accordion",8),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.formArray.controls)}}let f=(()=>{class n{constructor(e,o){this.menuSvc=e,this.fb=o,this.panelOpenState=!1,this.quantity=1,this.alwaysExpanded=!1,this.title="MENU",this.selectedItems=0,this.selectedItemTotalCost=0,this.showPriceSnackBar=!0}ngOnInit(){var e=this;return(0,y.Z)(function*(){const o=yield(0,h.n)(e.menuSvc.getAllByCategories());e.formArray=e.fb.array(o?.data?.map(i=>n.CreateFormForCategories(e.fb,i))),e.formArray.valueChanges.pipe((0,x.b)(500),(0,v.U)(i=>i.flatMap(s=>s.items)),(0,Z.x)()).subscribe(i=>{const s=i.filter(c=>(c?.quantity??0)>0);console.log(i),e.selectedItems=s.length,e.selectedItemTotalCost=s.reduce((c,C)=>c+(C?.price??0)*(C?.quantity??0),0)})})()}getItemGroup(e){return console.log(e.value),e.get("items")}patchQuantity(e,o){const s=Math.max(0,(e.value.quantity??0)+o);e.patchValue({quantity:s})}static CreateFormForCategories(e,o){const i=e.nonNullable.array(o?.items?.map(c=>n.CreateFormForMenuItem(e,c)));return console.log("array",i),e.nonNullable.group({category:o.category,items:i})}static CreateFormForMenuItem(e,o){return e.nonNullable.group({id:o.id,name:o.name,categoryType:o.categoryType,price:o.price,description:o.description,imageUrl:o.imageUrl,isVeg:o.isVeg,status:o.status,quantity:0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(M.X),t.Y36(u.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-menu"]],inputs:{alwaysExpanded:"alwaysExpanded",title:"title"},decls:18,vars:10,consts:[[1,"sub-header"],[4,"ngIf"],[1,"price-snackbar"],["cols","5","rowHeight","2rem"],["colspan","3",1,"item"],[1,"full-width"],["colspan","2",1,"item"],[1,"full-width",2,"text-align","right"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"card-bg"],[1,"expansion-title"],["formGroupName","items",3,"formGroup",4,"ngFor","ngForOf"],[2,"margin",".5rem"],["formGroupName","items",3,"formGroup"],["cols","5"],[1,"item-title"],[1,"item-price"],[1,"item-description"],["colspan","2"],[1,"item-button",3,"click"],[1,"item-quantity"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2),t.qZA()(),t.YNc(3,q,2,1,"div",1),t.TgZ(4,"div",2)(5,"mat-grid-list",3)(6,"mat-grid-tile",4)(7,"div",5)(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"span"),t._uU(11," | "),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.ALo(14,"currency"),t.qZA()()(),t.TgZ(15,"mat-grid-tile",6)(16,"div",7),t._uU(17," View Cart "),t.qZA()()()()),2&e&&(t.xp6(2),t.hij(" ",o.title,""),t.xp6(1),t.Q6J("ngIf",o.formArray),t.xp6(1),t.ekj("inactive",o.selectedItemTotalCost<=0),t.xp6(5),t.AsE("",o.selectedItems," item",o.selectedItems>1?"s":"",""),t.xp6(4),t.Oqu(t.xi3(14,7,o.selectedItemTotalCost,"INR")))},dependencies:[l.sg,l.O5,g.Il,g.DX,p.pp,p.ib,p.yz,p.yK,T.d,u.JL,u.sg,u.x0,l.gd,l.H9],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.text-center[_ngcontent-%COMP%]{text-align:center}.full-width[_ngcontent-%COMP%]{width:100%}.expansion-title[_ngcontent-%COMP%]{font-weight:200;letter-spacing:2px}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}.item-title[_ngcontent-%COMP%]{letter-spacing:1px}.text-muted[_ngcontent-%COMP%]{color:gray}.item-price[_ngcontent-%COMP%]{font-size:.9rem}.item-description[_ngcontent-%COMP%]{color:#7d7c83;font-size:.7rem}.item-button[_ngcontent-%COMP%]{height:20px;width:20px;border:1px solid #d4a373;border-radius:5px}.item-quantity[_ngcontent-%COMP%]{padding:5px}.price-snackbar[_ngcontent-%COMP%]{font-weight:700;background-color:#d4a373;padding:.75rem;border-radius:.5rem;position:fixed;bottom:.5rem;width:calc(100% - 1.5rem);transition:all .5s;transform:translateY(-1rem);color:#faebd7;text-shadow:0px 0px 5px black}.price-snackbar.inactive[_ngcontent-%COMP%]{transform:translateY(5rem)}"]}),n})();const U=[{path:"menu",component:f},{path:"cart",component:(()=>{class n{constructor(){this.panelOpenState=!0,this.quantity=1}ngOnInit(){}addQuantity(){this.quantity++,console.log(this.quantity)}removeQuantity(){this.quantity>0&&(this.quantity--,console.log(this.quantity))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cart"]],decls:2,vars:2,consts:[[3,"title","alwaysExpanded"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"app-menu",0),t.qZA()),2&e&&(t.xp6(1),t.Q6J("title","CART")("alwaysExpanded",!0))},dependencies:[f]}),n})()}];let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(U),d.Bz]}),n})();var G=r(7707);let b=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,F,G.M,u.UX]}),n})()}}]);