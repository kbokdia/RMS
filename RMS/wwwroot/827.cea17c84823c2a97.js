"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[827],{3827:(R,h,a)=>{a.r(h),a.d(h,{StaffModule:()=>H});var c=a(6895),g=a(639),t=a(1571);let y=(()=>{class n{constructor(){this.title="Staff Portal"}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:12,vars:4,consts:[[1,"sub-header"],[1,"center"],[1,"nav-buttons",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2),t.qZA()(),t.TgZ(3,"div",1)(4,"button",2),t._uU(5,"Menu"),t.qZA()(),t.TgZ(6,"div",1)(7,"button",2),t._uU(8,"Orders"),t.qZA()(),t.TgZ(9,"div",1)(10,"button",2),t._uU(11,"Tables"),t.qZA()()),2&e&&(t.xp6(2),t.hij(" ",o.title,""),t.xp6(2),t.Q6J("routerLink","/staff/menu"),t.xp6(3),t.Q6J("routerLink","/staff/orders"),t.xp6(3),t.Q6J("routerLink","/staff/tables"))},dependencies:[g.rH],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px}.nav-buttons[_ngcontent-%COMP%]{height:80px;width:300px;border:1px solid #D4A373;border-radius:5px;background-color:#faedcd}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}"]}),n})();var v=a(5861),A=a(6805),x=a(930),b=a(9300),O=a(4004),p=a(2792),s=a(433),d=a(782),Z=a(455);function M(n,r){if(1&n&&(t.TgZ(0,"mat-grid-list",10)(1,"mat-grid-tile",11)(2,"span",3),t._uU(3),t.qZA()(),t.TgZ(4,"mat-grid-tile",12)(5,"div"),t._UZ(6,"mat-slide-toggle",13),t.qZA()()()),2&n){const e=r.$implicit;t.Q6J("formGroup",e),t.xp6(3),t.Oqu(null==e.value?null:e.value.name)}}function E(n,r){if(1&n&&(t.ynx(0,7),t.TgZ(1,"h3",8),t._uU(2),t.qZA(),t.YNc(3,M,7,2,"mat-grid-list",9),t.BQk()),2&n){const e=r.$implicit;t.Q6J("formGroup",e),t.xp6(2),t.Oqu(null==e.value?null:e.value.category),t.xp6(1),t.Q6J("ngForOf",e.controls.items.controls)}}function F(n,r){if(1&n&&(t.ynx(0),t.YNc(1,E,4,3,"ng-container",6),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.formArray.controls)}}let G=(()=>{class n{constructor(e,o){this.formBuilder=e,this.menuApi=o}ngOnInit(){var e=this;return(0,v.Z)(function*(){const o=yield function S(n,r){const e="object"==typeof r;return new Promise((o,i)=>{const u=new x.Hp({next:l=>{o(l),u.unsubscribe()},error:i,complete:()=>{e?o(r.defaultValue):i(new A.K)}});n.subscribe(u)})}(e.menuApi.getAllByCategories());e.formArray=e.formBuilder.array(o.data.map(i=>e.createCategoryFormGroup(i))),e.formArray.controls.forEach(i=>i.controls.items.controls.forEach(u=>u.valueChanges.pipe((0,b.h)(l=>!!l.id),(0,O.U)(l=>({id:l.id,name:l.name,status:l.status?p.e.active:p.e.inactive}))).subscribe(l=>e.updateMenuItem(l))))})()}createCategoryFormGroup(e){return this.formBuilder.nonNullable.group({category:e.category,items:this.formBuilder.array(e.items.map(i=>this.createItemFormGroup(i)))})}createItemFormGroup(e){return this.formBuilder.nonNullable.group({id:e.id,name:e.name,status:e.status===p.e.active})}updateMenuItem(e){this.menuApi.updateMenuItemStatus(e).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(p.X))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-menu"]],decls:11,vars:1,consts:[[1,"sub-header"],["cols","3","rowHeight","30px"],["colspan","2","rowspan","1"],[1,"full-width"],["colspan","1","rowspan","1",1,"full-width"],[4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"sub-header-list"],["class","card-bg grid-list","cols","3","rowHeight","40px",3,"formGroup",4,"ngFor","ngForOf"],["cols","3","rowHeight","40px",1,"card-bg","grid-list",3,"formGroup"],["colspan","2","rowspan","1",1,"grid-tile"],["colspan","1","rowspan","1"],["formControlName","status"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2," MENU "),t.qZA()(),t.TgZ(3,"mat-grid-list",1)(4,"mat-grid-tile",2)(5,"span",3),t._uU(6,"ITEM"),t.qZA()(),t.TgZ(7,"mat-grid-tile",4)(8,"span"),t._uU(9,"AVAILABLE"),t.qZA()()(),t.YNc(10,F,2,1,"ng-container",5)),2&e&&(t.xp6(10),t.Q6J("ngIf",o.formArray))},dependencies:[c.sg,c.O5,d.Il,d.DX,Z.Rr,s.JJ,s.JL,s.sg,s.u],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.grid-tile[_ngcontent-%COMP%]{margin:0 10px}.grid-list[_ngcontent-%COMP%]{margin-bottom:5px}.full-width[_ngcontent-%COMP%]{width:100%}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}.sub-header-list[_ngcontent-%COMP%]{color:#d4a373;margin:10px 5px 5px}"]}),n})();var C=a(529);let U=(()=>{class n{constructor(e){this.httpClient=e,this.method="menu"}getAll(){return this.httpClient.get(this.method)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),I=(()=>{class n{constructor(e){this.ordersApi=e,this.orders$=this.ordersApi.getAll()}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-orders"]],decls:12,vars:0,consts:[["cols","7","rowHeight","50px",1,"card-bg"],["colspan","2","rowspan","1"],[1,"full-width"],["colspan","1","rowspan","1"]],template:function(e,o){1&e&&(t.TgZ(0,"mat-grid-list",0)(1,"mat-grid-tile",1)(2,"span",2),t._uU(3,"ORDER"),t.qZA()(),t.TgZ(4,"mat-grid-tile",3)(5,"span",2),t._uU(6,"TABLE"),t.qZA()(),t.TgZ(7,"mat-grid-tile",1)(8,"span",2),t._uU(9,"ITEM"),t.qZA()(),t.TgZ(10,"mat-grid-tile",1),t._uU(11," STATUS "),t.qZA()())},dependencies:[d.Il,d.DX],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.grid-tile[_ngcontent-%COMP%]{margin:0 10px}.grid-list[_ngcontent-%COMP%]{margin-bottom:5px}.full-width[_ngcontent-%COMP%]{width:100%}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}"]}),n})();var J=a(9808);let P=(()=>{class n{constructor(e){this.httpClient=e,this.method="table"}getAll(){return this.httpClient.get(this.method)}getById(e){return this.httpClient.get(`${this.method}/${e}`)}updateOrderStatus(e){return this.httpClient.put(`${this.method}/${e.id}/${e.status}`,e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(C.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=(()=>{return(n=m||(m={}))[n.undefined=0]="undefined",n[n.active=1]="active",n[n.inactive=2]="inactive",n[n.available=3]="available",n[n.occupied=4]="occupied",m;var n})(),f=a(3546),T=a(9549),B=a(8960),w=a(3238);function _(n,r){if(1&n&&(t.TgZ(0,"mat-option",8),t._uU(1),t.qZA()),2&n){const e=r.$implicit,o=t.oxw(3);t.Q6J("value",e),t.xp6(1),t.hij(" ",o.TableStatus[e]," ")}}function Q(n,r){if(1&n&&(t.TgZ(0,"mat-card",3)(1,"div",4)(2,"div")(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA()(),t.TgZ(7,"div")(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Status"),t.qZA(),t.TgZ(11,"mat-select",6),t.YNc(12,_,2,2,"mat-option",7),t.qZA()()()()()),2&n){const e=r.$implicit,o=t.oxw(2);t.Q6J("formGroup",e),t.xp6(4),t.Oqu(e.value.name),t.xp6(2),t.hij("Capacity: ",e.value.capacity,""),t.xp6(6),t.Q6J("ngForOf",o.TableStatusKeys)}}function N(n,r){if(1&n&&(t.ynx(0),t.YNc(1,Q,13,4,"mat-card",2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==e.formArray?null:e.formArray.controls)}}const Y=[{path:"",component:y},{path:"tables",component:(()=>{class n{constructor(e,o){this.formBuilder=e,this.tablesApi=o,this.TableStatus=m,this.TableStatusKeys=Object.values(m).filter(i=>"number"==typeof i&&i>0)}ngOnInit(){var e=this;return(0,v.Z)(function*(){const o=yield(0,J.n)(e.tablesApi.getAll());e.formArray=e.formBuilder.nonNullable.array(o.data.map(i=>e.createFormGroup(i))),e.formArray.controls.map(i=>i.valueChanges.pipe((0,b.h)(u=>!!u.status),(0,O.U)(u=>u)).subscribe(u=>e.updateOrderStatus(u)))})()}createFormGroup(e){return this.formBuilder.nonNullable.group({id:e.id,name:e.name,capacity:e.capacity,status:e.status})}updateOrderStatus(e){this.tablesApi.updateOrderStatus(e).subscribe()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(s.qu),t.Y36(P))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tables"]],decls:4,vars:1,consts:[[1,"sub-header"],[4,"ngIf"],["class","card-bg grid-list",3,"formGroup",4,"ngFor","ngForOf"],[1,"card-bg","grid-list",3,"formGroup"],[1,"wrapper"],["appearance","fill"],["formControlName","status"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2," TABLES "),t.qZA()(),t.YNc(3,N,2,1,"ng-container",1)),2&e&&(t.xp6(3),t.Q6J("ngIf",null==o.formArray?null:o.formArray.controls))},dependencies:[c.sg,c.O5,f.a8,f.n5,f.$j,T.KE,T.hX,B.gD,w.ey,s.JJ,s.JL,s.sg,s.u],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:2fr 1fr}.available[_ngcontent-%COMP%]{color:#fff;background-color:green}.grid-list[_ngcontent-%COMP%]{margin-bottom:10px}.card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}"]}),n})()},{path:"orders",component:I},{path:"menu",component:G}];let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(Y),g.Bz]}),n})();var $=a(7707);let H=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,L,$.M,s.UX]}),n})()}}]);