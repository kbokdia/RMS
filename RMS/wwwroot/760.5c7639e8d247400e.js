"use strict";(self.webpackChunkClient=self.webpackChunkClient||[]).push([[760],{760:(K,h,a)=>{a.r(h),a.d(h,{StaffModule:()=>z});var u=a(6895),f=a(3031),t=a(1571),Z=a(384);let v=(()=>{class e{constructor(n){this.authSvc=n,this.title="STAFF PORTAL"}ngOnInit(){}onLogout(){this.authSvc.logout()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Z.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:15,vars:4,consts:[[1,"sub-header"],[1,"center"],[1,"nav-buttons",3,"routerLink"],[1,"logout"],[3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2),t.qZA()(),t.TgZ(3,"div",1)(4,"button",2),t._uU(5,"MENU"),t.qZA()(),t.TgZ(6,"div",1)(7,"button",2),t._uU(8,"ORDERS"),t.qZA()(),t.TgZ(9,"div",1)(10,"button",2),t._uU(11,"TABLES"),t.qZA()(),t.TgZ(12,"div",3)(13,"button",4),t.NdJ("click",function(){return r.onLogout()}),t._uU(14,"LOG OUT"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",r.title,""),t.xp6(2),t.Q6J("routerLink","/staff/menu"),t.xp6(3),t.Q6J("routerLink","/staff/orders"),t.xp6(3),t.Q6J("routerLink","/staff/tables"))},dependencies:[f.rH],styles:[".center[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:20px}.nav-buttons[_ngcontent-%COMP%]{height:90px;width:300px;border:1px solid #D4A373;border-radius:5px;background-color:#faedcd;color:#d4a373;letter-spacing:1px}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}.logout[_ngcontent-%COMP%]{position:fixed;left:50%;bottom:10%;transform:translate(-50%,-50%)}.logout[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:50px;width:150px;border-radius:4px;background:#fff;border:1px solid #D4A373;color:#d4a373}.logout[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{background:#FAEDCD;color:#d4a373}"]}),e})();var x=a(5861),T=a(3905),C=a(9300),_=a(4004),g=a(2792),c=a(433),b=a(782),y=a(455);function M(e,o){if(1&e&&(t.TgZ(0,"mat-grid-list",10)(1,"mat-grid-tile",11)(2,"span",3),t._uU(3),t.qZA()(),t.TgZ(4,"mat-grid-tile",12)(5,"div"),t._UZ(6,"mat-slide-toggle",13),t.qZA()()()),2&e){const n=o.$implicit;t.Q6J("formGroup",n),t.xp6(3),t.Oqu(null==n.value?null:n.value.name)}}function F(e,o){if(1&e&&(t.ynx(0,7),t.TgZ(1,"h3",8),t._uU(2),t.qZA(),t.YNc(3,M,7,2,"mat-grid-list",9),t.BQk()),2&e){const n=o.$implicit;t.Q6J("formGroup",n),t.xp6(2),t.Oqu(null==n.value?null:n.value.category),t.xp6(1),t.Q6J("ngForOf",n.controls.items.controls)}}function U(e,o){if(1&e&&(t.ynx(0),t.YNc(1,F,4,3,"ng-container",6),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.formArray.controls)}}let J=(()=>{class e{constructor(n,r){this.formBuilder=n,this.menuApi=r}ngOnInit(){var n=this;return(0,x.Z)(function*(){const r=yield(0,T.z)(n.menuApi.getAllByCategories());n.formArray=n.formBuilder.array(r.data.map(i=>n.createCategoryFormGroup(i))),n.formArray.controls.forEach(i=>i.controls.items.controls.forEach(s=>s.valueChanges.pipe((0,C.h)(l=>!!l.id),(0,_.U)(l=>({id:l.id,name:l.name,status:l.status?g.e.active:g.e.inactive}))).subscribe(l=>n.updateMenuItem(l))))})()}createCategoryFormGroup(n){return this.formBuilder.nonNullable.group({category:n.category,items:this.formBuilder.array(n.items.map(i=>this.createItemFormGroup(i)))})}createItemFormGroup(n){return this.formBuilder.nonNullable.group({id:n.id,name:n.name,status:n.status===g.e.active})}updateMenuItem(n){this.menuApi.updateMenuItemStatus(n).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.qu),t.Y36(g.X))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-menu"]],decls:11,vars:1,consts:[[1,"sub-header"],["cols","3","rowHeight","30px"],["colspan","2","rowspan","1"],[1,"full-width"],["colspan","1","rowspan","1",1,"full-width"],[4,"ngIf"],[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"sub-header-list"],["class","card-bg grid-list","cols","3","rowHeight","40px",3,"formGroup",4,"ngFor","ngForOf"],["cols","3","rowHeight","40px",1,"card-bg","grid-list",3,"formGroup"],["colspan","2","rowspan","1",1,"grid-tile"],["colspan","1","rowspan","1"],["formControlName","status"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2," MENU "),t.qZA()(),t.TgZ(3,"mat-grid-list",1)(4,"mat-grid-tile",2)(5,"span",3),t._uU(6,"ITEM"),t.qZA()(),t.TgZ(7,"mat-grid-tile",4)(8,"span"),t._uU(9,"AVAILABLE"),t.qZA()()(),t.YNc(10,U,2,1,"ng-container",5)),2&n&&(t.xp6(10),t.Q6J("ngIf",r.formArray))},dependencies:[u.sg,u.O5,b.Il,b.DX,y.Rr,c.JJ,c.JL,c.sg,c.u],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.grid-tile[_ngcontent-%COMP%]{margin:0 10px}.grid-list[_ngcontent-%COMP%]{margin-bottom:5px}.full-width[_ngcontent-%COMP%]{width:100%}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}.sub-header-list[_ngcontent-%COMP%]{color:#d4a373;margin:10px 5px 5px}"]}),e})();var d=a(7963),P=a(4859),p=a(3546),A=a(3848);function S(e,o){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.menu.name," ")}}function G(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1," Special instructions: "),t.TgZ(2,"h5"),t._uU(3),t.qZA()()),2&e){const n=t.oxw().$implicit;t.xp6(3),t.Oqu(n.instructions)}}function N(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"mat-card",5)(1,"mat-card-title"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-content")(7,"ul",6),t.YNc(8,S,2,1,"li",7),t.qZA(),t._UZ(9,"br"),t.YNc(10,G,4,1,"span",8),t.qZA(),t.TgZ(11,"mat-card-actions",9)(12,"button",10),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onCancel(s.id))}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",11),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw();return t.KtG(l.onComplete(s.id))}),t._uU(15,"Complete"),t.qZA()()()}if(2&e){const n=o.$implicit;t.xp6(2),t.Oqu(t.xi3(3,5,n.orderDatetime,"dd MMM, h:mm a")),t.xp6(3),t.AsE("",n.table.name," | Order #",n.id,""),t.xp6(3),t.Q6J("ngForOf",n.items),t.xp6(2),t.Q6J("ngIf",n.instructions)}}function B(e,o){if(1&e&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.menu.name," ")}}function $(e,o){if(1&e&&(t.TgZ(0,"span"),t._uU(1," Special instructions: "),t.TgZ(2,"h5"),t._uU(3),t.qZA()()),2&e){const n=t.oxw().$implicit;t.xp6(3),t.Oqu(n.instructions)}}function q(e,o){if(1&e&&(t.TgZ(0,"mat-card",5)(1,"mat-card-title"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-content")(7,"ul",6),t.YNc(8,B,2,1,"li",7),t.qZA(),t._UZ(9,"br"),t.YNc(10,$,4,1,"span",8),t.qZA()()),2&e){const n=o.$implicit;t.xp6(2),t.Oqu(t.xi3(3,5,n.orderDatetime,"dd MMM, h:mm a")),t.xp6(3),t.AsE("",n.table.name," | Order #",n.id,""),t.xp6(3),t.Q6J("ngForOf",n.items),t.xp6(2),t.Q6J("ngIf",n.instructions)}}let I=(()=>{class e{constructor(n,r){this.formBuilder=n,this.ordersApi=r,this.orders$=this.ordersApi.getByStatus(d.l.Pending),this.completedOrders$=this.ordersApi.getByStatus(d.l.Completed)}ngOnInit(){}onComplete(n){this.ordersApi.updateStatus(n,d.l.Completed).subscribe(()=>this.orders$=this.ordersApi.getByStatus(d.l.Pending))}onCancel(n){this.ordersApi.updateStatus(n,d.l.Inactive).subscribe(()=>this.orders$=this.ordersApi.getByStatus(d.l.Pending))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.qu),t.Y36(d.W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-orders"]],decls:9,vars:6,consts:[[1,"sub-header"],["mat-align-tabs","center"],["label","PENDING"],["class","card-bg",4,"ngFor","ngForOf"],["label","COMPLETED"],[1,"card-bg"],[1,"no-style-list","wrapped-list"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"right-align"],["mat-button","",1,"card-button",2,"color","#bc6c25",3,"click"],["mat-button","",1,"card-button",3,"click"]],template:function(n,r){if(1&n&&(t.TgZ(0,"h3",0),t._uU(1," ORDERS\n"),t.qZA(),t.TgZ(2,"mat-tab-group",1)(3,"mat-tab",2),t.YNc(4,N,16,8,"mat-card",3),t.ALo(5,"async"),t.qZA(),t.TgZ(6,"mat-tab",4),t.YNc(7,q,11,8,"mat-card",3),t.ALo(8,"async"),t.qZA()()),2&n){let i,s;t.xp6(4),t.Q6J("ngForOf",null==(i=t.lcZ(5,2,r.orders$))?null:i.data),t.xp6(3),t.Q6J("ngForOf",null==(s=t.lcZ(8,4,r.completedOrders$))?null:s.data)}},dependencies:[u.sg,u.O5,P.lW,p.a8,p.dn,p.n5,p.$j,p.hq,A.SP,A.uX,u.Ov,u.uU],styles:[".card-bg[_ngcontent-%COMP%]{background-color:#e9edc9;margin:10px 5px}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}ul[_ngcontent-%COMP%]{list-style:none;padding-left:5px}button[_ngcontent-%COMP%]{height:50px;width:150px;border-radius:4px;background:#fff;border:1px solid #D4A373;color:#d4a373}.right-align[_ngcontent-%COMP%]{display:flex;justify-content:right}"]}),e})();var Q=a(9808),L=a(529);let Y=(()=>{class e{constructor(n){this.httpClient=n,this.method="table"}getAll(){return this.httpClient.get(this.method)}getById(n){return this.httpClient.get(`${this.method}/${n}`)}updateOrderStatus(n){return this.httpClient.put(`${this.method}/${n.id}/${n.status}`,n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(L.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=(()=>{return(e=m||(m={}))[e.undefined=0]="undefined",e[e.active=1]="active",e[e.inactive=2]="inactive",e[e.available=3]="available",e[e.occupied=4]="occupied",m;var e})(),O=a(9549),D=a(4385),j=a(3238);function w(e,o){if(1&e&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&e){const n=o.$implicit,r=t.oxw(3);t.Q6J("value",n),t.xp6(1),t.hij(" ",r.TableStatus[n]," ")}}function H(e,o){if(1&e&&(t.TgZ(0,"mat-card",3)(1,"div",4)(2,"div")(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Status"),t.qZA(),t.TgZ(10,"mat-select",6),t.YNc(11,w,2,2,"mat-option",7),t.qZA()()(),t.TgZ(12,"div"),t._UZ(13,"img",8),t.qZA()()()),2&e){const n=o.$implicit,r=t.oxw(2);t.Q6J("formGroup",n),t.xp6(4),t.Oqu(n.value.name),t.xp6(2),t.hij("Capacity: ",n.value.capacity,""),t.xp6(5),t.Q6J("ngForOf",r.TableStatusKeys),t.xp6(2),t.Q6J("src","https://chart.googleapis.com/chart?chs=128x128&cht=qr&chl=url:https://rms-appservice.azurewebsites.net/customer/menu?tableid="+n.value.id,t.LSH)}}function R(e,o){if(1&e&&(t.ynx(0),t.YNc(1,H,14,5,"mat-card",2),t.BQk()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==n.formArray?null:n.formArray.controls)}}const E=[{path:"",component:v},{path:"tables",component:(()=>{class e{constructor(n,r){this.formBuilder=n,this.tablesApi=r,this.TableStatus=m,this.TableStatusKeys=Object.values(m).filter(i=>"number"==typeof i&&i>0)}ngOnInit(){var n=this;return(0,x.Z)(function*(){const r=yield(0,Q.n)(n.tablesApi.getAll());n.formArray=n.formBuilder.nonNullable.array(r.data.map(i=>n.createFormGroup(i))),n.formArray.controls.map(i=>i.valueChanges.pipe((0,C.h)(s=>!!s.status),(0,_.U)(s=>s)).subscribe(s=>n.updateOrderStatus(s)))})()}createFormGroup(n){return this.formBuilder.nonNullable.group({id:n.id,name:n.name,capacity:n.capacity,status:n.status})}updateOrderStatus(n){this.tablesApi.updateOrderStatus(n).subscribe()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(c.qu),t.Y36(Y))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tables"]],decls:4,vars:1,consts:[[1,"sub-header"],[4,"ngIf"],["class","card-bg grid-list",3,"formGroup",4,"ngFor","ngForOf"],[1,"card-bg","grid-list",3,"formGroup"],[1,"wrapper"],["appearance","fill"],["formControlName","status"],[3,"value",4,"ngFor","ngForOf"],[3,"src"],[3,"value"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2," TABLES "),t.qZA()(),t.YNc(3,R,2,1,"ng-container",1)),2&n&&(t.xp6(3),t.Q6J("ngIf",null==r.formArray?null:r.formArray.controls))},dependencies:[u.sg,u.O5,p.a8,p.n5,p.$j,O.KE,O.hX,D.gD,j.ey,c.JJ,c.JL,c.sg,c.u],styles:[".wrapper[_ngcontent-%COMP%]{display:grid;grid-gap:10px;grid-template-columns:2fr 1fr}.available[_ngcontent-%COMP%]{color:#fff;background-color:green}.grid-list[_ngcontent-%COMP%]{margin-bottom:10px}.card-bg[_ngcontent-%COMP%]{background-color:#e9edc9}.sub-header[_ngcontent-%COMP%]{text-align:center;color:#d4a373;margin:10px}"]}),e})()},{path:"orders",component:I},{path:"menu",component:J}];let X=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(E),f.Bz]}),e})();var k=a(9986);let z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,X,k.M,c.UX]}),e})()}}]);